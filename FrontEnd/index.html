<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Gesti칩n Hospitalaria</title>

    <style>
      /* ==================== ESTILOS GENERALES ==================== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box; /* Incluye padding/border en el ancho total */
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; /* Fuente */
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #e0dce3 100%
        ); /* Fondo degradado */
        min-height: 100vh; /* Ocupar toda la pantalla */
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      /* ==================== CONTENEDOR PRINCIPAL ==================== */
      .container {
        background: white;
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); /* Sombra elegante */
        padding: 40px;
        max-width: 1200px;
        width: 100%;
        animation: fadeIn 0.8s ease-out; /* Animaci칩n de entrada */
      }

      /* Animaci칩n al cargar el contenedor */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ==================== ENCABEZADO ==================== */
      .header {
        text-align: center;
        margin-bottom: 40px;
        background: linear-gradient(45deg, #2c3e50, #3498db);
        color: white;
        padding: 30px;
        border-radius: 15px;
        position: relative;
        overflow: hidden;
      }

      /* Fondo animado de pulso en el encabezado */
      .header::before {
        content: "";
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        animation: pulse 3s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.5;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.8;
        }
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        position: relative;
        z-index: 2; /* Encima del fondo animado */
      }

      /* ==================== MEN칔 PRINCIPAL ==================== */
      .menu-grid {
        display: grid;
        grid-template-columns: repeat(
          auto-fit,
          minmax(300px, 1fr)
        ); /* Grid adaptable */
        gap: 25px;
        margin-bottom: 30px;
      }

      .menu-card {
        background: white;
        border: 2px solid #e8f4fd;
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      /* Efecto al pasar el mouse */
      .menu-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        border-color: #3498db;
      }

      /* Brillo animado en hover */
      .menu-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(52, 152, 219, 0.1),
          transparent
        );
        transition: left 0.5s ease;
      }

      .menu-card:hover::before {
        left: 100%;
      }

      /* Icono de las tarjetas */
      .menu-icon {
        font-size: 3em;
        margin-bottom: 15px;
        color: #3498db;
        transition: all 0.3s ease;
      }

      .menu-card:hover .menu-icon {
        transform: scale(1.2) rotate(5deg); /* Animaci칩n al pasar el mouse */
      }

      /* Texto de las tarjetas */
      .menu-title {
        font-size: 1.3em;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 10px;
      }

      .menu-description {
        color: #7f8c8d;
        font-size: 0.95em;
        line-height: 1.4;
      }

      /* ==================== INDICADORES DE PRIORIDAD ==================== */
      .priority-indicator {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        animation: blink 2s infinite; /* Parpadeo */
      }

      .alta {
        background-color: #e74c3c;
      } /* Rojo */
      .media {
        background-color: #f39c12;
      } /* Amarillo */
      .baja {
        background-color: #27ae60;
      } /* Verde */

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.3;
        }
      }

      /* ==================== BARRA DE ESTAD칈STICAS ==================== */
      .status-bar {
        background: linear-gradient(45deg, #f8f9fa, #e9ecef);
        border-radius: 10px;
        padding: 20px;
        margin-top: 30px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 20px;
        text-align: center;
      }

      .status-number {
        font-size: 2em;
        font-weight: bold;
        color: #3498db;
        display: block;
      }

      .status-label {
        color: #7f8c8d;
        font-size: 0.9em;
        margin-top: 5px;
      }

      /* ==================== ALERTA URGENTE ==================== */
      .urgent-alert {
        background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
        text-align: center;
        animation: urgentPulse 1.5s infinite;
        box-shadow: 0 5px 15px rgba(238, 90, 36, 0.4);
      }

      @keyframes urgentPulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
      }

      /* ==================== MODAL ==================== */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5); /* Fondo semi-transparente */
        display: none; /* Oculto por defecto */
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
      }

      .modal {
        background: white;
        padding: 30px;
        border-radius: 15px;
        max-width: 500px;
        width: 100%;
        text-align: center;
        animation: modalSlide 0.3s ease-out;
        max-height: 80vh;
        overflow-y: auto; /* Scroll si hay mucho contenido */
      }

      @keyframes modalSlide {
        from {
          transform: translateY(-50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .modal h2 {
        margin-bottom: 15px;
        color: #2c3e50;
      }
      .modal p {
        margin-bottom: 20px;
        line-height: 1.6;
        color: #7f8c8d;
      }

      .close-modal {
        background: #e74c3c;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 15px;
        transition: background 0.3s ease;
      }

      .close-modal:hover {
        background: #c0392b;
      }

      /* ==================== RESPONSIVE ==================== */
      @media (max-width: 768px) {
        .container {
          padding: 20px;
        }
        .header h1 {
          font-size: 2em;
        }
        .menu-grid {
          grid-template-columns: 1fr;
        }
        .status-bar {
          grid-template-columns: repeat(2, 1fr);
          gap: 15px;
        }
      }

      @media (max-width: 480px) {
        .header h1 {
          font-size: 1.8em;
        }
        .header p {
          font-size: 1em;
        }
        .status-bar {
          grid-template-columns: 1fr;
        }
        .menu-icon {
          font-size: 2.5em;
        }
        .menu-title {
          font-size: 1.1em;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <!-- Encabezado -->
      <div class="header">
        <h1>游낀 Gesti칩n Hospitalaria</h1>
      </div>

      <!-- Alerta de pacientes urgentes -->
      <div class="urgent-alert">
        丘멆잺 <strong>ALERTA:</strong> <span id="urgentCount">3</span> pacientes de
        alta prioridad en espera
      </div>

      <!-- Men칰 principal con 3 tarjetas -->
      <div class="menu-grid">
        <div class="menu-card" data-route="registerpatient.html">
          <div class="priority-indicator alta"></div>
          <div class="menu-icon">游녻</div>
          <div class="menu-title">Registrar Paciente</div>
          <div class="menu-description">
            Agregar nuevo paciente al sistema con datos completos y nivel de
            urgencia
          </div>
        </div>

        <div class="menu-card" data-route="waitingList.html">
          <div class="priority-indicator media"></div>
          <div class="menu-icon">游늶</div>
          <div class="menu-title">Lista de Espera</div>
          <div class="menu-description">
            Ver todos los pacientes organizados por nivel de prioridad de
            atenci칩n
          </div>
        </div>

        <div class="menu-card" data-route="patienthistory.html">
          <div class="priority-indicator baja"></div>
          <div class="menu-icon">游늵</div>
          <div class="menu-title">Historial M칠dico</div>
          <div class="menu-description">
            Consultar registro completo de pacientes atendidos y su historial
          </div>
        </div>
      </div>

      <!-- Barra de estad칤sticas -->
      <div class="status-bar">
        <div class="status-item">
          <span class="status-number" id="waitingCount">12</span>
          <div class="status-label">En Espera</div>
        </div>
        <div class="status-item">
          <span class="status-number" id="priorityCount">3</span>
          <div class="status-label">Alta Prioridad</div>
        </div>
        <div class="status-item">
          <span class="status-number" id="attendedCount">45</span>
          <div class="status-label">Atendidos Hoy</div>
        </div>
      </div>
    </div>

    <!-- Modal (ventana emergente) -->
    <div class="modal-overlay" id="modalOverlay">
      <div class="modal">
        <h2 id="modalTitle">T칤tulo de la Funci칩n</h2>
        <p id="modalContent">Descripci칩n de la funcionalidad seleccionada</p>
        <button class="close-modal" onclick="closeModal()">Cerrar</button>
      </div>
    </div>

    <script>
      /* ==================== VARIABLES GLOBALES ==================== */
      let systemData = {
        waiting: 12, // Pacientes en espera
        priority: 3, // Pacientes de alta prioridad
        attended: 45, // Pacientes atendidos hoy
      };

      /* ==================== MODAL ==================== */
      function showModal(title) {
        const modal = document.getElementById("modalOverlay");
        const titleElement = document.getElementById("modalTitle");
        const contentElement = document.getElementById("modalContent");

        titleElement.textContent = title;

        // Diccionario de descripciones por funci칩n
        const descriptions = {
          "Registro de nuevo paciente":
            "Aqu칤 podr치s ingresar los datos del paciente: nombre completo, edad/fecha de nacimiento, s칤ntomas, nivel de urgencia y generar autom치ticamente el n칰mero de expediente.",
          "Lista de espera por prioridad":
            "Visualiza todos los pacientes organizados en colas seg칰n su prioridad: Alta (1), Media (2), Baja (3).",
          "Atender siguiente paciente":
            "Llama autom치ticamente al siguiente paciente seg칰n el orden de prioridad.",
          "Cambiar prioridad de paciente":
            "Permite modificar el nivel de urgencia de un paciente ya registrado.",
          "Buscar paciente por nombre":
            "Funci칩n de b칰squeda para localizar r치pidamente cualquier paciente.",
          "Estad칤sticas del sistema":
            "Dashboard con m칠tricas importantes del hospital.",
          "Configuraciones del sistema": "Ajustes generales del sistema.",
        };

        // Cargar descripci칩n o un texto por defecto
        contentElement.textContent =
          descriptions[title] || "Funcionalidad del sistema hospitalario.";

        modal.style.display = "flex"; // Mostrar modal
        modal.querySelector(".close-modal").focus();
      }

      // Cerrar modal
      function closeModal() {
        const modal = document.getElementById("modalOverlay");
        modal.style.display = "none";
      }

      /* ==================== ACTUALIZAR ESTAD칈STICAS ==================== */
      function updateSystemStats() {
        // Simulaci칩n de cambios en tiempo real
        systemData.waiting = Math.max(
          0,
          systemData.waiting + Math.floor(Math.random() * 3) - 1
        );
        systemData.priority = Math.max(
          0,
          systemData.priority + Math.floor(Math.random() * 2) - 1
        );
        systemData.attended += Math.floor(Math.random() * 2);

        // Refrescar valores en pantalla
        document.getElementById("waitingCount").textContent =
          systemData.waiting;
        document.getElementById("priorityCount").textContent =
          systemData.priority;
        document.getElementById("attendedCount").textContent =
          systemData.attended;
        document.getElementById("urgentCount").textContent =
          systemData.priority;
      }

      /* ==================== NOTIFICACIONES ==================== */
      function showNotification(message, type = "info") {
        const notification = document.createElement("div");
        notification.textContent = message;
        notification.style.position = "fixed";
        notification.style.bottom = "20px";
        notification.style.right = "20px";
        notification.style.padding = "15px 20px";
        notification.style.borderRadius = "10px";
        notification.style.color = "white";
        notification.style.zIndex = "2000";
        notification.style.maxWidth = "300px";
        notification.style.boxShadow = "0 5px 15px rgba(0,0,0,0.3)";

        // Colores seg칰n tipo
        switch (type) {
          case "success":
            notification.style.background =
              "linear-gradient(45deg, #27ae60, #2ecc71)";
            break;
          case "emergency":
            notification.style.background =
              "linear-gradient(45deg, #e74c3c, #c0392b)";
            break;
          default:
            notification.style.background =
              "linear-gradient(45deg, #3498db, #2980b9)";
        }

        document.body.appendChild(notification);

        // Desaparece tras 3 segundos
        setTimeout(() => {
          notification.style.opacity = "0";
          notification.style.transform = "translateY(20px)";
          notification.style.transition = "all 0.5s ease";
          setTimeout(() => notification.remove(), 500);
        }, 3000);
      }

      /* ==================== NAVEGACI칍N DEL MEN칔 ==================== */
      document.querySelectorAll(".menu-card").forEach((card) => {
        card.addEventListener("click", function () {
          const route = this.dataset.route;
          if (route) {
            window.location.href = route; // Redirige a la p치gina indicada
          }
        });
      });

      /* ==================== CARGAR DATOS DEL BACKEND ==================== */
      async function loadStats() {
        try {
          const response = await fetch(
            "http://localhost:5000/api/pacientes/stats"
          );
          const stats = await response.json();

          // Mostrar datos obtenidos del servidor
          document.getElementById("waitingCount").textContent = stats.waiting;
          document.getElementById("priorityCount").textContent = stats.priority;
          document.getElementById("attendedCount").textContent = stats.attended;
          document.getElementById("urgentCount").textContent = stats.priority;
        } catch (e) {
          // Si falla la conexi칩n
          showNotification("No se pudo cargar estad칤sticas reales", "error");
        }
      }

      // Llamar carga al iniciar
      document.addEventListener("DOMContentLoaded", () => {
        loadStats();
      });

      // Simulaci칩n de actualizaci칩n peri칩dica
      updateSystemStats();
      setInterval(updateSystemStats, 30000); // Cada 30 segundos

      /* ==================== VOLVER AL INICIO ==================== */
      function goBack() {
        window.location.href = "index.html";
      }
    </script>
  </body>
</html>
